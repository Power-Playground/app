import{_ as f}from"../../../preload-helper-75e41364.js";import{j as s,d as C}from"../../../index-eb125c8a.js";import{P as v,i as b,a as n}from"../../../messenger-provider-d9b12058.js";const y=()=>s.jsx(v,{placement:"top",content:s.jsxs(s.Fragment,{children:["Execute   ",s.jsxs("kbd",{children:[b?"⌘":"Ctrl"," + E"]})]}),offset:[0,6],children:s.jsx("button",{className:"excute",style:{"--btn-color":"#4eb03e"},onClick:()=>n.send("run"),children:s.jsx("div",{className:"cldr codicon codicon-play"})})});let l;const _="outputs",S=C(_,()=>({editor:{preload(i){const r=n.on("compile",()=>{if(!l){n.send("compile-completed",{"":{originalText:"",outputFiles:[{name:"(compile error)",text:"No output to compile, maybe the Editor is still loading",writeByteOrderMark:!1,tsCompilerResultText:""}]}});return}n.send("compile-completed",l)}),u=[i.languages.registerCompletionItemProvider(["typescript","javascript"],{triggerCharacters:["@"],async provideCompletionItems(e,o){if(o.lineNumber!==1)return;if(e.getLineContent(o.lineNumber).startsWith("// @"))return{suggestions:[{label:"devtools.output.compiled",detail:"Display the compiled output in the console's `.JS` tab",kind:i.languages.CompletionItemKind.Text,insertText:"devtools.output.compiled",range:new i.Range(o.lineNumber,o.column,o.lineNumber,o.column)}]}}})];return()=>{l=void 0,r(),u.forEach(e=>e.dispose())}},load(i,r){i.onDidChangeModelContent(function u(){const e=i.getModel();if(e){let o=Promise.resolve(void 0),a=!1;e.uri.path.match(/\.tsx?$/)&&(o=r.languages.typescript.getTypeScriptWorker()),e.uri.path.match(/\.jsx?$/)&&(a=!0,o=r.languages.typescript.getJavaScriptWorker()),o.then(t=>t==null?void 0:t(e.uri)).then(t=>t==null?void 0:t.getEmitOutput(e.uri.toString())).then(t=>{if(!t)return;const p=e.getValue(),d=e.uri.toString(),h=t.outputFiles.reduce((c,g)=>{const x=`${g.name.endsWith(".js")?`// @devtools.output.compiled\r
`:""}${t.outputFiles[0].text}`;return c.push({...g,tsCompilerResultText:x}),c},[]);l={[d]:{originalText:p,outputFiles:h}};const m=l[d];a&&(m.outputFiles=[{name:e.uri.toString(),writeByteOrderMark:!1,text:p,tsCompilerResultText:p}].concat(m.outputFiles)),n.send("compile-completed",l)})}return u}()),i.addCommand(r.KeyMod.CtrlCmd|r.KeyCode.KeyE,()=>n.send("run"))},topbar:[y]},devtools:({importInEvalLogs:i})=>i(new URL(Object.values(Object.assign({"./devtools.ts":()=>f(()=>import("../../../devtools-50fa2bc7.js"),["assets/devtools-50fa2bc7.js","assets/index-eb125c8a.js","assets/messenger-provider-d9b12058.js","assets/messenger-provider-b12cab36.css","assets/preload-helper-75e41364.js"])}))[0].toString().replace(/.*import\("(.+?)"\).*/,"$1"),import.meta.url).href).then(r=>r.default)}));export{S as _,_ as i};
