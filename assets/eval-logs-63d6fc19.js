import"./modulepreload-polyfill-3cfb730f.js";import{e as D}from"./messenger-provider-d9b12058.js";import{_ as y}from"./preload-helper-75e41364.js";import"./index-eb125c8a.js";window.__DEBUG__=JSON.parse(localStorage.getItem("enableDebug")??"false");sentinel.on(".__chobitsu-hide__",c=>{var _;(_=c.children[0])==null||_.remove()});D.on("update:localStorage",([c,a])=>{JSON.parse(localStorage.getItem(c)??'""')!==a&&localStorage.setItem(c,JSON.stringify(a))});window.importInEvalLogs=c=>y(()=>import(c),[]);var P;((P=Object.getOwnPropertyDescriptor(window,"__PPD_PLUGINS__"))==null?void 0:P.get)===void 0&&Object.defineProperty(window,"__PPD_PLUGINS__",{get:()=>window.parent.__PPD_PLUGINS__});var p;((p=Object.getOwnPropertyDescriptor(window,"__OLD_PPD_PLUGINS__"))==null?void 0:p.get)===void 0&&Object.defineProperty(window,"__OLD_PPD_PLUGINS__",{get:()=>window.parent.__OLD_PPD_PLUGINS__});var O;((O=Object.getOwnPropertyDescriptor(window,"__PPD_CONFIGURES__"))==null?void 0:O.get)===void 0&&Object.defineProperty(window,"__PPD_CONFIGURES__",{get:()=>window.parent.__PPD_CONFIGURES__});(async function(){let a=null;if(a||(a=await new Promise(t=>sentinel.on("iframe",e=>t(e)))),a===null)throw new Error("Cannot find devtools");const _=a,n=_.contentWindow,w=_.contentDocument;__DEBUG__&&console.debug("devtools",n,w),__DEBUG__&&console.debug("readyState",w.readyState);const h=window.__PPD_PLUGINS__??{},m=Object.entries(h).filter(t=>{var e;return((e=t[1])==null?void 0:e.devtools)!==void 0}).filter(([t,e])=>!0).map(([t,{devtools:e}])=>(__DEBUG__&&console.debug("loading plugin",`[${t}]
`,e),typeof e=="function"?Promise.resolve(e(window)):Promise.resolve(e)));if(__DEBUG__&&console.debug("DEVTOOLS_PLUGINS",m),m.length===0){__DEBUG__&&console.debug("no plugins");return}m.forEach(t=>t.then(({beforeMount:e})=>e==null?void 0:e({devtoolsWindow:n})));{let t=JSON.parse(localStorage.getItem("uiTheme")??'""');D.on("update:localStorage",([e,o])=>{if(e==="uiTheme"&&t!==o){const r=_.contentDocument.querySelector("html");o==="dark"&&r.classList.add("-theme-with-dark-background"),o==="default"&&r.classList.remove("-theme-with-dark-background"),t=o}})}function E(t,e){const{tabbedPane:o,...r}=e,l=r.drawerTabbedPane;m.forEach(g=>g.then(({panels:d,drawerPanels:i})=>{d==null||d.forEach(s=>{const u=s(n,t),S=new u;o.hasTab(s.id)||o==null||o.appendTab(s.id,s.title,S)}),i==null||i.forEach(s=>{const u=s(n,t),S=new u;l.hasTab(s.id)||l==null||l.appendTab(s.id,s.title,S)})}))}let f=!1;const I=()=>({run:async()=>{if(f)return;f=!0;const t=await n.simport("ui/legacy/legacy.js"),e=t.InspectorView.InspectorView.instance();m.forEach(o=>o.then(({load:r})=>{r==null||r({UI:t,inspectorView:e,devtoolsWindow:n})})),E(t,e)}});await async function(){await new Promise(i=>{w.readyState==="complete"&&n.simport&&i(),n.addEventListener("load",()=>i())}),(await n.simport("core/common/common.js")).Runnable.registerEarlyInitializationRunnable(I);const{MainImpl:e}=await n.simport("entrypoints/main/main.js");let o;const r=new Promise(i=>o=i),l=e.MainImpl.timeEnd;e.MainImpl.timeEnd=function(i){l.call(e.MainImpl,i),["Main._initializeTarget","Main._lateInitialization"].includes(i)&&o()};const g=e.MainImpl.instanceForTest;if(g===null)return;const d=g.lateInitDonePromise;d===void 0?await r:await d;try{await I().run()}catch(i){f=!1,console.debug(i)}}()})();const L=localStorage.getItem("storageInited");L||(localStorage.setItem("storageInited",JSON.stringify(!0)),localStorage.setItem("textEditorIndent",JSON.stringify("  ")));localStorage.setItem("consoleShowSettingsToolbar",JSON.stringify(!1));localStorage.setItem("viewsLocationOverride",JSON.stringify({resources:"none",elements:"none",network:"none",sources:"none"}));localStorage.setItem("panel-selectedTab",JSON.stringify("console"));
