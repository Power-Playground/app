import{j as o}from"./index-eb125c8a.js";import{P as I,s as v,c as w}from"./messenger-provider-d9b12058.js";const a="ppd-menu";function j(s){const{items:l,onSelect:u,onVisibleChange:i,closeWhenSelect:m=!0}=s,d=React.useRef(null),[x,p]=React.useState(0),r=React.useRef(x),c=React.useRef([]);function h(e,t){var n;r.current=t,p(t),u==null||u(e),m&&((n=d.current)==null||n.hide())}return o.jsx(I,{ref:d,tabIndex:0,style:s.style,className:s.className,trigger:"click",placement:"bottom-start",offset:[0,5],onKeydown:e=>{if(["ArrowDown","ArrowUp"].includes(e.key)){e.stopPropagation(),e.preventDefault();const t=1,n=r.current+(e.key==="ArrowDown"?1:-1);r.current=Math.max(0,Math.min(n,l.length-1)),v(c.current[r.current>n?Math.max(n-t,0):Math.min(n+t,l.length-1)]),c.current[r.current].focus()}},onVisibleChange:e=>{i==null||i(e),e&&setTimeout(()=>{c.current[r.current].focus()},350)},content:o.jsx("div",{className:a,children:l.map((e,t)=>{if(e==="slider")return o.jsx("div",{className:`${a}-slider`},t);function n(){h(typeof e=="string"?{id:e,title:e}:e,t)}const{title:R,children:y}=typeof e=="string"?{title:e,children:e}:{title:e.title??e.id,children:e.content??e.title??e.id};return o.jsx("div",{ref:f=>c.current[t]=f,tabIndex:0,className:w(`${a}-item`,x===t&&`${a}-item__active`),title:R,onClick:n,onKeyDown:f=>{f.key==="Enter"&&n()},children:y},t)})}),children:s.children})}export{j as M};
